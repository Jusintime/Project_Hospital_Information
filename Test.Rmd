```{r, echo=FALSE, include=FALSE}
# Create a choropleth map of the United States that compares the average covered charges to the average total payments
library(dplyr)
library(leaflet)
library(maps)
#hospital.data <- read.csv("data/hospital_data.csv", stringsAsFactors = F)
#hospital.data.state <- hospital.data %>%
#  select(Provider.State, Average.Covered.Charges, Average.Total.Payments) %>% 
#  group_by(Provider.State) %>% 
#  summarize(State.Covered.Charges = mean(as.numeric(gsub("\\$", "", Average.Covered.Charges)) / as.numeric(gsub("\\$", "", Average.Total.Payments))))
hospital.data.state <- read.csv("data/hospital_data_state_abb.csv")
source("scripts/choropleth.r")
state.choropleth <- makeStateChoropleth(hospital.data.state)
```
#State Choropleth Map: Best Insurance Coverage

`r state.choropleth`

```{r, echo=FALSE, include=FALSE}
hospital.data.lat.lon <- read.csv("data/hospital_data_lat_lon.csv", stringsAsFactors = F)
source("scripts/leaflet_map.r")
m <- makeHospitalMap(hospital.data.lat.lon, "039 - EXTRACRANIAL PROCEDURES W/O CC/MCC", 5000)
```
# County Choropleth Map: Best Insurance Coverage

`r m`
